!function(){"use strict";var t=React.createClass({displayName:"Card",render:function(){console.log("rendering");var t=this.props.legislator,e=t.email.trim().length>0?React.DOM.a({href:"mailto:"+t.email.trim()},"Email"):"",a=t.twitter.trim().length>0?React.DOM.a({href:t.twitter},"Twitter"):"",l=t.facebook.trim().length>0?React.DOM.a({href:t.facebook},"Facebook"):"",s=0==(l+a+e).length?"Not Available":"";return React.DOM.div({className:"card col-md-6"},React.DOM.h3(null,t.first_name+" "+t.last_name),React.DOM.ul(null,React.DOM.li(null,React.DOM.strong(null,"District:")," ",t.district||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Sect: "),t.sect||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Party: ")," ",t.party||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Phone: ")," ",t.phone||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Mobile: ")," ",t.mobile||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Social: ")," ",s,React.DOM.span(null,e," ",a," ",l))))}}),e=React.createClass({displayName:"Table",render:function(){var e=[];return this.props.legislators.forEach(function(a){var l=a.first_name+" "+a.last_name;-1===l.toLowerCase().indexOf(this.props.filterText.toLowerCase())||"All"!==this.props.district&&a.district!==this.props.district||"All"!==this.props.sect&&a.sect!==this.props.sect||"All"!==this.props.party&&a.party!==this.props.party||e.push(t({legislator:a}))}.bind(this)),React.DOM.div({className:"list col-md-12"},e)}}),a=React.createClass({displayName:"SearchBar",handleChange:function(){this.props.onUserInput(this.refs.filterTextInput.getDOMNode().value)},render:function(){return React.DOM.form({className:"searchBar col-md-12"},React.DOM.input({type:"text",id:"search",placeholder:"Search...",value:this.props.filterText,onChange:this.handleChange,ref:"filterTextInput"}))}}),l=React.createClass({displayName:"FilterBar",handleChange:function(){this.props.onUserInput(this.refs.districtInput.getDOMNode().value,this.refs.sectInput.getDOMNode().value,this.refs.partyInput.getDOMNode().value)},render:function(){var t=[],e=[],a=[];console.log(this.props),this.props.legislators.forEach(function(l){"All"!==this.props.district&&l.district!==this.props.district||"All"!==this.props.sect&&l.sect!==this.props.sect||"All"!==this.props.party&&l.party!==this.props.party||(-1===t.indexOf(l.district)&&t.push(l.district),-1===e.indexOf(l.sect)&&e.push(l.sect),-1===a.indexOf(l.party)&&a.push(l.party))}.bind(this));var l=t.map(function(t){return React.DOM.option({value:t},t)}),s=a.map(function(t){return React.DOM.option({value:t},t)}),i=e.map(function(t){return React.DOM.option({value:t},t)});return React.DOM.form({className:"filterBar col-md-12"},React.DOM.div({className:"selector col-md-4"},React.DOM.span(null,React.DOM.label(null,"Sect:"),React.DOM.select({ref:"sectInput",value:this.props.sect,onChange:this.handleChange},React.DOM.option({value:"All"},"All"),i)," ")),React.DOM.div({className:"selector col-md-4"},React.DOM.span(null,React.DOM.label(null,"Party:"),React.DOM.select({ref:"partyInput",value:this.props.party,onChange:this.handleChange},React.DOM.option({value:"All"},"All"),s)," ")),React.DOM.div({className:"selector col-md-4"},React.DOM.span(null,React.DOM.label(null,"District:"),React.DOM.select({ref:"districtInput",value:this.props.district,onChange:this.handleChange},React.DOM.option({value:"All"},"All"),l))))}}),s=React.createClass({displayName:"FilterableTable",componentDidMount:function(){console.log("mounted"),$("#img").hide()},handleNewData:function(t){this.setState({legislators:t})},componentWillMount:function(){var t=this;$("#img").show(),$.ajax({url:this.props.url,dataType:"json"}).done(function(e){t.handleNewData(e)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},getInitialState:function(){return{legislators:[],filterText:"",district:"All",sect:"All",party:"All"}},handleSearchInput:function(t){this.setState({filterText:t})},handleFilterInput:function(t,e,a){this.setState({district:t,sect:e,party:a})},render:function(){return React.DOM.div(null,a({onUserInput:this.handleSearchInput,filterText:this.state.filterText}),l({onUserInput:this.handleFilterInput,legislators:this.state.legislators,district:this.state.district,sect:this.state.sect,party:this.state.party}),e({legislators:this.state.legislators,filterText:this.state.filterText,district:this.state.district,sect:this.state.sect,party:this.state.party}))}});React.renderComponent(s({url:"http://api.nouwweb.pw/search?deputies_terms=2009"}),document.getElementById("content"))}(),$("#img").hide();